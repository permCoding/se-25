# Вещественные числа

- `есть ограничения на точность обработки`  

Проблема: `0.1 + 0.2` => `0.30000000000000004`.  

Сравнение через `===` не работает, потому что оно требует **абсолютной** точности:  

```javascript
console.log(0.1 + 0.2 === 0.3); // false (они не равны)
```

В реальных расчетах ошибка в 15-м знаке после запятой считается несущественной.  

Поэтому можно сделать так **Если разница между числами меньше, чем `минимально допустимая`, то считай, что они равны**.  

---

## константа Number.EPSILON  

`Number.EPSILON` — это минимально возможная разницу между двумя числами, которую компьютер может различить в JavaScript.  

Если разница между двумя числами меньше, чем `Number.EPSILON`, то для компьютера эти числа одинаковые.  

Значение этой константы примерно равно: `2.220446049250313e-16` == 2 / 2**53.  

---

### Как использовать?  

Вместо прямого сравнения, мы вычитаем одно число из другого и берем модуль (чтобы убрать минус, если он есть).

```javascript
let result = 0.1 + 0.2; // 0.30000000000000004
let expected = 0.3;

// Проверяем: модуль разницы меньше ли, чем минимальная погрешность?
if (Math.abs(result - expected) < Number.EPSILON) {
    console.log("Числа равны (с учетом погрешности)");
} else {
    console.log("Числа разные");
}
```

### Для удобства сделаем свою функцию  

```javascript
function isEqual(a, b) {
    return Math.abs(a - b) < Number.EPSILON;
}
```

```JS
const isEqual = (a, b) => Math.abs(a - b) < Number.EPSILON;
```

```JS
console.log(isEqual(0.1 + 0.2, 0.3)); // true
console.log(isEqual(0.1 + 0.2, 0.4)); // false
console.log(isEqual(1.0000000000000001, 1)); // true (компьютер их и так не различит, но формула работает)
```
